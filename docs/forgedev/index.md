시작하기에 앞서
===============

포지에 기여하시고 싶으시다면 개발 환경 설정을 위해 거쳐야 할 단계들이 있습니다. 그저 단순한 모드 개발 환경은 포지 코드베이스 수정을 지원하지 못합니다. 그 대신, 아래 안내를 참고하여 포지 개선을 위한 개발 환경을 설정하실 수 있습니다!

리포지토리 포킹 및 클론
-----------------

포지 또한 여러 오픈 소스 프로젝트들처럼 [GitHub][github] 에 호스팅 됩니다. 만약 이전에도 다른 오픈 소스 프로젝트에 기여하신 적이 있으시다면 이 단계는 이미 충분히 잘 아실 테니 건너뛰셔도 됩니다.

Git 을 이용한 협업이 처음이시라면 아래 단계들을 따라주세요.

!!! note
    이 문서는 이미 당신에게 GitHub 계정이 있다고 가정하고 작성되었습니다. 만약 계정이 없으시다면 [가입 페이지][가입]를 방문하여 계정을 만들어 주세요. 또한, 이 문서는 git 의 전반적 사용법을 위한 튜토리얼이 아닙니다. 문제가 발생하시면 다른 가이드를 참고하여 주세요.

### 포킹

일단, [마인크래프트 포지 리포지토리][포지리포]를 "포크"하셔야 합니다. 오른쪽 위의 "Fork" 를 클릭하여서 하실 수 있습니다. GitHub Organization 에 추가하시고 싶으시다면 리포지토리를 포크할 계정을 선택해주세요.

모든 GitHub 사용자가 모든 리포지토리에 쓰기 권한이 있는 것이 아니기에 먼저 포킹을 하는 것은 필수적입니다. 포킹은 원본 리포지토리의 당신만의 복사본을 만들어 자유롭게 작업하실 수 있도록 하고, 작업하신 내용은 나중에 Pull Request 를 통해 원본 리포지토리에 제출합니다. 이에 대해선 나중에 더 다룰 것입니다.

### 클론

리포지토리를 포킹하셨다면 이제 컴퓨터에 내려받아 직접 작업하실 때가 되었습니다. 이 내려받는 작업을 클론이라고 합니다.

당신이 애용하시는 git 클라이언트를 이용해 원하시는 곳에 리포지토리를 클론해주세요. 대개 아래처럼 명령어를 이용해 현재 디렉터리에서 "MinecraftForge" 라는 폴더에 내려받습니다. 아래 `<User>` 를 당신의 닉네임으로 변경하시는 것을 잊지 마세요!

```git clone https://github.com/<User>/MinecraftForge```

# 작업용 브랜치 체크아웃 하기

포지 개발 환경 설정을 위해선 오직 리포지토리를 포킹하고 클론하는 것만 하셔도 되지만, Pull Request 제출을 수월하게 하려면 위해 새로운 브랜치를 만드시는 것을 추천합니다.

새로운 PR 을 제출하실 때마다 새로운 브랜치를 만드시면 다른 사람의 작업물을 바로 내려받으면서도 이전 코드베이스를 유지할 수 있습니다.

이제 개발 환경을 설정하고 실행하실 준비가 완료되었습니다.

개발 환경 설정하기
--------------------------

사용하시는 IDE 에 따라 적절한 개발 환경 설정 방법이 조금씩 다릅니다. 

### Eclipse

Eclipse 의 작업공간 덕분에, ForgeGradle 이 대부분의 개발 환경 설정을 대신 할 수 있습니다.

1. 터미널/명령 프롬프트를 열어 리포지토리를 클론한 곳으로 이동해 주세요.
2. `./gradlew setup` 을 적으시고 엔터를 누르신 이후, ForgeGradle 이 작업을 완료하기까지 기다려 주세요.
3. `./gradlew genEclipseRuns` 를 적으시고 엔터를 누르신 이후, ForgeGradle 이 작업을 완료하기까지 기다려 주세요.
4. 이클립스 작업 공간을 여신 이후 `File -> Import -> General -> Existing Gradle Project` 를 눌러주세요.
5. 클론한 리포지토리로 이동하신 다음 "Project root directory" 옵션을 체크해 주세요.
6. "Finish" 를 눌러 프로젝트를 열어주세요.

이게 끝입니다. 테스트 모드를 실행하기 위한 추가적인 설정도 필요하지 않습니다. "Run" 을 클릭하신 다음 적절한 실행 구성을 선택하여 주세요.

### IntelliJ IDEA

Jetbrains 의 IDE 는 기본적으로 포지가 이용하는 빌드 시스템인 [Gradle][gradle] 을 지원합니다. 하지만 마인크래프트 모드 개발의 특이성 때문에 설정 과정이 조금 복잡합니다.

#### IDEA 2021 이후

1. IntelliJ IDEA 를 실행해 주세요.
   - 이미 다른 프로젝트에서 작업 중이시라면 `파일 -> 프로젝트 닫기` 를 눌러 기존 프로젝트를 닫아주세요.
2. "IntelliJ IDEA에 오신 것을 환영합니다" 창에서, 오른쪽 위 "열기" 버튼을 누르고 이전에 내려받은 포지 리포지토리를 열어주세요.
3. 만약 프로젝트를 신뢰할 것인지 물어본다면 "프로젝트 신뢰" 를 눌러주세요.
4. IDEA 가 프로젝트를 불러오고 색인 생성을 다 마쳤다면 Gradle 의 setup 작업을 다음과 같이 실행해야 합니다:
   - 화면 오른쪽의 Gradle 탭을 연 다음, 포지 프로젝트 트리에서 `Tasks` -> `other` -> `setup`(`MinecraftForge[Setup]` 이라고 표시될 수도 있습니다) 을 더블 클릭해서 실행해 주세요.
5. 실행 구성 생성하기:
   - 화면 오른쪽의 Gradle 탭을 연 다음, 포지 프로젝트 트리에서 `Tasks` -> `forgegradle runs` -> `genIntellijRuns`(`MinecraftForge[genIntellijRuns]` 이라고 표시될 수도 있습니다) 를 더블 클릭해서 실행해 주세요.
- 만약 아직 작업한 것이 없는데도 라이선스 문제가 발생한다면 `Tasks` -> `other` -> `updateLicenses` 를 실행하면 해결될 수도 있습니다.

#### IDEA 2019-2020

이 설정 과정은 IDEA 2021과 크게 다르지 않습니다. 

1. 포지의 `build.gradle` 파일을 IDEA 프로젝트로 열어주세요. "Welcome to Intellij IDEA" 창에서 "Import Project" 를 누르시고, 내려받은 포지 리포지토리의 `build.gradle` 파일을 열어주세요.
2. IDEA 가 프로젝트를 불러오고 색인 생성을 다 마쳤다면 Gradle 의 setup 작업을 둘 중 하나의 방법으로 실행해야 합니다:
   1. 화면 오른쪽의 Gradle 탭을 연 다음, 포지 프로젝트 트리에서 `Tasks` -> `other` -> `setup`(`MinecraftForge[Setup]` 이라고 표시될 수도 있습니다) 을 더블 클릭해서 실행해 주세요.
   2. CTRL 키를 두번 누르신 다음 `Run` 명령 창에 `gradle setup` 를 적고 엔터를 누르세요.

이제 `forge_client` Gradle 작업으로 포지를 실행하실 수 있습니다 (`Tasks -> fg_runs -> forge_client`): 해당 작업을 우클릭 한 이후 실행 또는 디버그하시면 됩니다.

#### 구버전 IDEA

2016보다 오래된 IDEA 버전들은 포지 개발 환경에 필요한 멀티 프로젝트 및 Gradle 지원이 없어서 이용하실 수 없습니다, 

IDEA 2016 - 2018 는 설정 과정이 더 복잡하지만 그래도 사용하실 순 있습니다. 그래도 IDEA 2019 또는 이후 버전을 이용하시는 것을 강력히 권장드립니다.
cpw 씨께서 올려주신 [비디오][intellijsetup]를 따라 IDEA 2016.1 를 설정하실 수 있습니다.

IDEA 를 이용하여 개발 환경을 구성하는 것은 이게 다입니다. 하지만 바로 포지에 동봉된 테스트 및 디버그 모드들을 바로 실행하실 순 없을 것입니다.

[comment]: <> (섹션 `Enabling test mods` 와 `Testing with existing mods` 는 구버전 ForgeGradle 을 기반으로 작성되었기 때문에 제거하였습니다.)
코드 수정 및 Pull Request 제출하기
--------------------------------

개발 환경 설정을 끝마치셨다면 이젠 포지의 코드베이스를 수정하실 차례입니다. 그렇지만, 프로젝트 코드를 수정하며 잊지 말아야 할 것은 오직 "Forge" 서브 프로젝트의 코드만 수정하셔야 한다는 것입니다. "Clean" 프로젝트를 수정하시게 되면 ForgeGradle 이 나중에 패치를 생성할 때 문제가 발생합니다. 잘못하면 개발 환경 설정을 처음부터 다시 해야 할 수도 있습니다.

### 패치 생성하기

이제 코드 베이스를 수정하셨고 테스트도 끝마치셨다면, 패치를 생성하셔도 좋습니다. 이는 마인크래프트 코드를 수정하였을 때만 필요합니다. 포지는 패치를 이용하여 마인크래프트에 다른 코드를 주입하기 때문에 패치가 있어야 변경 사항을 주입할 수 있습니다. ForgeGradle 은 이를 위해 자동으로 패치를 생성해 줍니다.

패치 생성을 시작하기 위해선 `genPatches` Gradle 작업을 IDE 또는 명령줄을 이용해 실행해 주세요. 작업이 끝난 이후 모든 작업 내용을 커밋하고(필요 없는 것들은 당연히 빼주세요!) Pull Request 를 제출하시면 됩니다!

### Pull Requests

포지에 기여하기 위한 마지막 단계는 Pull Request(줄여서 PR) 제출입니다. PR 은 당신의 작업 내용을 적용해달라는 요청입니다. PR 을 제출하는 것 또한 간단합니다, [이 페이지][pr제출]를 방문하신 다음 제시된 단계들을 따라 하시면 됩니다. 이때 이전에 말씀드린 대로 새 PR 을 만들 때 마다 새로운 브랜치를 만드는 것이 좋은 이유를 보실 수 있는데, 무엇을 제출할지 결정할 수 있기 때문입니다.

!!! note
    Pull Request 는 정해진 규칙에 따라 처리됩니다; 모든 PR 이 받아들여지진 않습니다. [이 문서][기여하기]를 참고하여 PR 을 더 개선하는 방법을 알아보세요! PR 을 더 잘 받아들여지도록 하고 싶으시다면 [이 가이드라인][가이드라인]을 따라주세요!

[github]: https://www.github.com
[가입]: https://www.github.com/join
[포지리포]: https://www.github.com/MinecraftForge/MinecraftForge
[gradle]: https://www.gradle.org
[intellijsetup]: https://www.youtube.com/watch?v=yanCpy8p2ZE
[testsetup]: https://www.youtube.com/watch?v=pLWQk6ed56Q
[pr제출]: https://github.com/MinecraftForge/MinecraftForge/compare
[comment]: <> (이거 1.13.x 브랜치여도 되나?)
[기여하기]: https://github.com/MinecraftForge/MinecraftForge/blob/1.13.x/CONTRIBUTING.md
[가이드라인]: ./prguidelines.md
